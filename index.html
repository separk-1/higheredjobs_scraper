<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Civil Engineering Professor Job Scraper</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .controls {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .control-row {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .control-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        label {
            font-weight: 600;
            color: #2c3e50;
            font-size: 0.9rem;
        }
        
        input, select, button {
            padding: 10px 15px;
            border: 2px solid #e1e8ed;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn.stop {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }
        
        .status {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .status-item:last-child {
            border-bottom: none;
        }
        
        .status-value {
            font-weight: 600;
            color: #667eea;
        }
        
        .results {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        .tab-buttons {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .tab-button {
            padding: 12px 24px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-weight: 600;
            color: #666;
            transition: all 0.3s ease;
        }
        
        .tab-button.active {
            color: #667eea;
            border-bottom-color: #667eea;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .job-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .job-card:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .job-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
        }
        
        .job-details {
            display: flex;
            gap: 20px;
            color: #666;
            font-size: 0.9rem;
            flex-wrap: wrap;
        }
        
        .job-description {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #555;
            line-height: 1.4;
        }
        
        .json-output {
            background: #2d3748;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
            white-space: pre-wrap;
            max-height: 500px;
            overflow-y: auto;
        }
        
        .download-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .log {
            background: #1a202c;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.8rem;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .github-link {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 25px;
            text-decoration: none;
            color: #333;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }
        
        .github-link:hover {
            background: #333;
            color: white;
            transform: translateY(-2px);
        }
        
        .alert {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        @media (max-width: 768px) {
            .control-row {
                flex-direction: column;
                align-items: stretch;
            }
            
            .job-details {
                flex-direction: column;
                gap: 5px;
            }
            
            .download-buttons {
                flex-direction: column;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <a href="https://github.com/yourusername/civil-engineering-job-scraper" class="github-link">
        ‚≠ê Star on GitHub
    </a>

    <div class="container">
        <div class="header">
            <h1>üèóÔ∏è Civil Engineering Professor Job Scraper</h1>
            <p>Automatically collect and monitor professor job postings in Civil Engineering, Construction, and Building Sciences</p>
        </div>
        
        <div class="alert">
            <strong>‚ö†Ô∏è Demo Mode:</strong> This is a demonstration using mock data. For production use, implement actual web scraping with proper backend services and respect website terms of service.
        </div>
        
        <div class="controls">
            <div class="control-row">
                <div class="control-group">
                    <label for="interval">Update Interval (seconds)</label>
                    <input type="number" id="interval" value="300" min="60" max="3600">
                </div>
                <div class="control-group">
                    <label for="maxJobs">Max Job Postings</label>
                    <input type="number" id="maxJobs" value="100" min="10" max="500">
                </div>
                <div class="control-group">
                    <label for="requiredKeywords">Required Keywords (AND)</label>
                    <input type="text" id="requiredKeywords" placeholder="professor" value="professor">
                </div>
                <div class="control-group">
                    <label for="fieldKeywords">Field Keywords (OR)</label>
                    <input type="text" id="fieldKeywords" placeholder="civil, construction, building" value="civil, construction, building">
                </div>
            </div>
            <div class="control-row">
                <button class="btn" id="startBtn" onclick="startScraping()">Start Scraping</button>
                <button class="btn stop" id="stopBtn" onclick="stopScraping()" disabled>Stop</button>
                <button class="btn" onclick="manualScrape()">Manual Run</button>
                <button class="btn" onclick="clearData()">Clear Data</button>
            </div>
        </div>
        
        <div class="status">
            <h3>üìä Status Information</h3>
            <div class="status-item">
                <span>Scraping Status:</span>
                <span class="status-value" id="status">Idle</span>
            </div>
            <div class="status-item">
                <span>Last Update:</span>
                <span class="status-value" id="lastUpdate">-</span>
            </div>
            <div class="status-item">
                <span>Total Job Postings:</span>
                <span class="status-value" id="jobCount">0</span>
            </div>
            <div class="status-item">
                <span>Next Update In:</span>
                <span class="status-value" id="nextUpdate">-</span>
            </div>
        </div>
        
        <div class="results">
            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('jobs')">Job Listings</button>
                <button class="tab-button" onclick="showTab('json')">JSON Data</button>
                <button class="tab-button" onclick="showTab('html')">HTML Output</button>
            </div>
            
            <div class="download-buttons">
                <button class="btn" onclick="downloadJSON()">üìÑ Download JSON</button>
                <button class="btn" onclick="downloadHTML()">üåê Download HTML</button>
                <button class="btn" onclick="downloadCSV()">üìä Download CSV</button>
            </div>
            
            <div id="jobs" class="tab-content active">
                <div id="jobsList">
                    <p style="text-align: center; color: #666; padding: 40px;">
                        Start scraping to collect job postings
                    </p>
                </div>
            </div>
            
            <div id="json" class="tab-content">
                <div id="jsonOutput" class="json-output">
                    JSON data will be displayed here...
                </div>
            </div>
            
            <div id="html" class="tab-content">
                <div id="htmlOutput" class="json-output">
                    HTML output will be displayed here...
                </div>
            </div>
            
            <div class="log" id="log">
                <div>[System] Job scraper initialized and ready.</div>
            </div>
        </div>
    </div>

    <script>
        let scrapingInterval;
        let countdownInterval;
        let jobsData = [];
        let isRunning = false;

        // Generate mock data for Civil Engineering, Construction, and Building Sciences
        function generateMockJobs(count) {
            const titles = [
                'Assistant Professor of Civil Engineering',
                'Associate Professor of Construction Management',
                'Professor of Structural Engineering',
                'Assistant Professor of Building Sciences',
                'Associate Professor of Civil and Environmental Engineering',
                'Professor of Construction Engineering',
                'Assistant Professor of Building Information Modeling',
                'Professor of Infrastructure Engineering',
                'Associate Professor of Sustainable Construction',
                'Assistant Professor of Building Systems Engineering',
                'Professor of Geotechnical Engineering',
                'Associate Professor of Construction Materials',
                'Assistant Professor of Smart Buildings',
                'Professor of Transportation Engineering',
                'Associate Professor of Building Energy Systems',
                'Assistant Professor of Earthquake Engineering',
                'Professor of Water Resources Engineering',
                'Associate Professor of Construction Safety',
                'Assistant Professor of Green Building Design',
                'Professor of Concrete Technology'
            ];
            
            const institutions = [
                'MIT - Department of Civil Engineering',
                'Stanford University - Civil & Environmental Engineering',
                'UC Berkeley - Civil Engineering',
                'Georgia Tech - Building Construction',
                'University of Illinois - Civil Engineering',
                'Carnegie Mellon - Civil & Environmental Engineering',
                'University of Texas - Construction Engineering',
                'Virginia Tech - Building Construction',
                'Purdue University - Construction Engineering',
                'North Carolina State - Construction Management',
                'University of Michigan - Civil Engineering',
                'Cornell University - Civil Engineering',
                'Northwestern University - Civil Engineering',
                'University of Washington - Construction Management',
                'Texas A&M - Civil Engineering'
            ];
            
            const locations = [
                'Cambridge, MA',
                'Palo Alto, CA', 
                'Berkeley, CA',
                'Atlanta, GA',
                'Urbana, IL',
                'Pittsburgh, PA',
                'Austin, TX',
                'Blacksburg, VA',
                'West Lafayette, IN',
                'Raleigh, NC',
                'Ann Arbor, MI',
                'Ithaca, NY',
                'Evanston, IL',
                'Seattle, WA',
                'College Station, TX'
            ];
            
            const specializations = [
                'Structural Engineering',
                'Construction Management', 
                'Building Information Modeling (BIM)',
                'Sustainable Construction',
                'Smart Buildings',
                'Infrastructure Systems',
                'Construction Materials',
                'Building Energy Systems',
                'Geotechnical Engineering',
                'Transportation Engineering',
                'Water Resources',
                'Earthquake Engineering',
                'Construction Safety',
                'Green Building Design',
                'Concrete Technology'
            ];
            
            const ranks = ['Assistant Professor', 'Associate Professor', 'Full Professor', 'Lecturer', 'Clinical Professor'];
            
            const jobs = [];
            for (let i = 0; i < count; i++) {
                const title = titles[Math.floor(Math.random() * titles.length)];
                const specialization = specializations[Math.floor(Math.random() * specializations.length)];
                const rank = ranks[Math.floor(Math.random() * ranks.length)];
                
                jobs.push({
                    id: `job_${Date.now()}_${i}`,
                    title: title,
                    institution: institutions[Math.floor(Math.random() * institutions.length)],
                    location: locations[Math.floor(Math.random() * locations.length)],
                    rank: rank,
                    type: Math.random() > 0.2 ? 'Full-time' : 'Part-time',
                    remote: Math.random() > 0.8 ? 'Hybrid Available' : 'On-site',
                    specialization: specialization,
                    postedDate: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    deadline: new Date(Date.now() + Math.random() * 90 * 24 * 60 * 60 * 1000).toISOString().split('T')[0],
                    salary: Math.random() > 0.3 ? `$${Math.floor(Math.random() * 50000 + 70000).toLocaleString()}/year` : 'Competitive',
                    description: `Seeking excellent candidates with strong background in ${specialization.toLowerCase()}. The successful candidate will contribute to teaching and research in civil engineering, construction management, or building sciences.`,
                    requirements: [
                        'PhD in Civil Engineering, Construction, or related field',
                        `Strong research background in ${specialization.toLowerCase()}`,
                        'Teaching experience preferred',
                        'Publication record in peer-reviewed journals',
                        'Professional engineering experience is a plus'
                    ],
                    url: `https://higheredjobs.com/job/${Math.floor(Math.random() * 100000)}`,
                    scrapedAt: new Date().toISOString()
                });
            }
            return jobs;
        }

        function log(message) {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            logDiv.innerHTML += `<div>[${time}] ${message}</div>`;
            logDiv.scrollTop = logDiv.scrollHeight;
        }

        async function scrapeJobs() {
            log('Starting job scraping...');
            
            try {
                const maxJobs = parseInt(document.getElementById('maxJobs').value);
                const requiredKeywords = document.getElementById('requiredKeywords').value.toLowerCase().trim();
                const fieldKeywords = document.getElementById('fieldKeywords').value.toLowerCase().trim();
                
                // Generate mock data (in production, this would be actual web scraping)
                let newJobs = generateMockJobs(Math.floor(Math.random() * 15) + 5);
                
                // Advanced keyword filtering
                if (requiredKeywords || fieldKeywords) {
                    newJobs = newJobs.filter(job => {
                        const jobText = (job.title + ' ' + job.description + ' ' + job.specialization).toLowerCase();
                        
                        // Required keywords check (AND condition)
                        let meetsRequired = true;
                        if (requiredKeywords) {
                            const requiredList = requiredKeywords.split(',').map(k => k.trim()).filter(k => k);
                            meetsRequired = requiredList.every(keyword => jobText.includes(keyword));
                        }
                        
                        // Field keywords check (OR condition)  
                        let meetsField = true;
                        if (fieldKeywords) {
                            const fieldList = fieldKeywords.split(',').map(k => k.trim()).filter(k => k);
                            meetsField = fieldList.some(keyword => jobText.includes(keyword));
                        }
                        
                        return meetsRequired && meetsField;
                    });
                }
                
                // Merge with existing data (remove duplicates)
                const existingIds = new Set(jobsData.map(job => job.id));
                const uniqueNewJobs = newJobs.filter(job => !existingIds.has(job.id));
                
                jobsData = [...jobsData, ...uniqueNewJobs];
                
                // Limit to max jobs
                if (jobsData.length > maxJobs) {
                    jobsData = jobsData.slice(-maxJobs);
                }
                
                updateDisplay();
                log(`Collected ${uniqueNewJobs.length} new job postings. Total: ${jobsData.length}`);
                
                // Update status
                document.getElementById('lastUpdate').textContent = new Date().toLocaleString();
                document.getElementById('jobCount').textContent = jobsData.length;
                
            } catch (error) {
                log(`Scraping error: ${error.message}`);
            }
        }

        function updateDisplay() {
            updateJobsList();
            updateJSONOutput();
            updateHTMLOutput();
        }

        function updateJobsList() {
            const jobsList = document.getElementById('jobsList');
            if (jobsData.length === 0) {
                jobsList.innerHTML = '<p style="text-align: center; color: #666; padding: 40px;">No job postings collected yet</p>';
                return;
            }
            
            const jobsHTML = jobsData.map(job => `
                <div class="job-card">
                    <div class="job-title">${job.title}</div>
                    <div class="job-details">
                        <span>üèõÔ∏è ${job.institution}</span>
                        <span>üìç ${job.location}</span>
                        <span>üë®‚Äçüè´ ${job.rank}</span>
                        <span>üíº ${job.type}</span>
                        <span>üåê ${job.remote}</span>
                        <span>üî¨ ${job.specialization}</span>
                        <span>üí∞ ${job.salary}</span>
                        <span>üìÖ Posted: ${job.postedDate}</span>
                        <span>‚è∞ Deadline: ${job.deadline}</span>
                    </div>
                    <div class="job-description">
                        ${job.description}
                    </div>
                </div>
            `).join('');
            
            jobsList.innerHTML = jobsHTML;
        }

        function updateJSONOutput() {
            const jsonOutput = document.getElementById('jsonOutput');
            jsonOutput.textContent = JSON.stringify({
                lastUpdated: new Date().toISOString(),
                totalJobs: jobsData.length,
                searchCriteria: {
                    requiredKeywords: document.getElementById('requiredKeywords').value,
                    fieldKeywords: document.getElementById('fieldKeywords').value
                },
                jobs: jobsData
            }, null, 2);
        }

        function updateHTMLOutput() {
            const htmlOutput = document.getElementById('htmlOutput');
            const htmlContent = `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Civil Engineering Professor Jobs - ${new Date().toLocaleDateString()}</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
        .header { background: #f4f4f4; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .job { border: 1px solid #ddd; margin: 15px 0; padding: 20px; border-radius: 5px; }
        .title { font-size: 1.3em; font-weight: bold; color: #2c3e50; margin-bottom: 10px; }
        .details { color: #666; margin-bottom: 10px; }
        .description { margin-top: 10px; }
        .meta { font-size: 0.9em; color: #888; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üèóÔ∏è Civil Engineering Professor Job Postings</h1>
        <p><strong>Total Jobs:</strong> ${jobsData.length} | <strong>Last Updated:</strong> ${new Date().toLocaleString()}</p>
    </div>
    ${jobsData.map(job => `
        <div class="job">
            <div class="title">${job.title}</div>
            <div class="details">
                <strong>Institution:</strong> ${job.institution}<br>
                <strong>Location:</strong> ${job.location}<br>
                <strong>Rank:</strong> ${job.rank} | <strong>Type:</strong> ${job.type} | <strong>Remote:</strong> ${job.remote}<br>
                <strong>Specialization:</strong> ${job.specialization}<br>
                <strong>Salary:</strong> ${job.salary}
            </div>
            <div class="description">
                <strong>Description:</strong> ${job.description}
            </div>
            <div class="meta">
                Posted: ${job.postedDate} | Deadline: ${job.deadline} | <a href="${job.url}" target="_blank">View Original</a>
            </div>
        </div>
    `).join('')}
</body>
</html>`;
            htmlOutput.textContent = htmlContent;
        }

        function startScraping() {
            if (isRunning) return;
            
            isRunning = true;
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            document.getElementById('status').textContent = 'Running';
            
            const interval = parseInt(document.getElementById('interval').value) * 1000;
            
            // Run immediately once
            scrapeJobs();
            
            // Set periodic execution
            scrapingInterval = setInterval(scrapeJobs, interval);
            
            // Start countdown
            startCountdown();
            
            log('Started automatic scraping.');
        }

        function stopScraping() {
            if (!isRunning) return;
            
            isRunning = false;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            document.getElementById('status').textContent = 'Stopped';
            document.getElementById('nextUpdate').textContent = '-';
            
            if (scrapingInterval) {
                clearInterval(scrapingInterval);
            }
            if (countdownInterval) {
                clearInterval(countdownInterval);
            }
            
            log('Stopped automatic scraping.');
        }

        function startCountdown() {
            const interval = parseInt(document.getElementById('interval').value);
            let remaining = interval;
            
            countdownInterval = setInterval(() => {
                if (!isRunning) return;
                
                remaining--;
                if (remaining <= 0) {
                    remaining = interval;
                }
                
                const minutes = Math.floor(remaining / 60);
                const seconds = remaining % 60;
                document.getElementById('nextUpdate').textContent = 
                    `${minutes}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        function manualScrape() {
            log('Running manual scrape...');
            scrapeJobs();
        }

        function clearData() {
            if (confirm('Are you sure you want to clear all collected data?')) {
                jobsData = [];
                updateDisplay();
                document.getElementById('jobCount').textContent = '0';
                log('All data cleared.');
            }
        }

        function showTab(tabName) {
            // Deactivate all tabs
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            // Activate selected tab
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
        }

        function downloadJSON() {
            const data = {
                lastUpdated: new Date().toISOString(),
                totalJobs: jobsData.length,
                searchCriteria: {
                    requiredKeywords: document.getElementById('requiredKeywords').value,
                    fieldKeywords: document.getElementById('fieldKeywords').value
                },
                jobs: jobsData
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `civil_engineering_jobs_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
            log('JSON file downloaded.');
        }

        function downloadHTML() {
            const htmlContent = document.getElementById('htmlOutput').textContent;
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `civil_engineering_jobs_${new Date().toISOString().split('T')[0]}.html`;
            a.click();
            URL.revokeObjectURL(url);
            log('HTML file downloaded.');
        }

                function downloadCSV() {
            if (jobsData.length === 0) {
                alert('No data to download.');
                return;
            }
            
            const headers = ['Title', 'Institution', 'Location', 'Rank', 'Type', 'Remote', 'Specialization', 'Salary', 'Posted Date', 'Deadline', 'URL'];
            const csvContent = [
                headers.join(','),
                ...jobsData.map(job => [
                    `"${job.title}"`,
                    `"${job.institution}"`,
                    `"${job.location}"`,
                    `"${job.rank}"`,
                    `"${job.type}"`,
                    `"${job.remote}"`,
                    `"${job.specialization}"`,
                    `"${job.salary}"`,
                    job.postedDate,
                    job.deadline,
                    job.url
                ].join(','))
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `civil_engineering_jobs_${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            URL.revokeObjectURL(url);
            log('CSV file downloaded.');
        }
    </script>
</body>
</html>
